
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Index - LXD documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ubuntu:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"ubuntu";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/style.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL(".",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lxd" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="LXD documentation" class="md-header__button md-logo" aria-label="LXD documentation" data-md-component="logo">
      
  <img src="img/containers.small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LXD documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/lang/" hreflang="ja" class="md-select__link">
                    Another language
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/lxc/lxd/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="test/" class="md-tabs__link">
        Tab test
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="LXD documentation" class="md-nav__button md-logo" aria-label="LXD documentation" data-md-component="logo">
      
  <img src="img/containers.small.png" alt="logo">

    </a>
    LXD documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/lxc/lxd/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Index
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Index
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    Status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-lxd-from-packages" class="md-nav__link">
    Installing LXD from packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-lxd-from-source" class="md-nav__link">
    Installing LXD from source
  </a>
  
    <nav class="md-nav" aria-label="Installing LXD from source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-source-building-the-latest-version" class="md-nav__link">
    From Source: Building the latest version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source-building-a-release" class="md-nav__link">
    From Source: Building a Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-build" class="md-nav__link">
    Starting the Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source-installing" class="md-nav__link">
    From Source: Installing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-setup" class="md-nav__link">
    Machine Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-lxd" class="md-nav__link">
    Getting started with LXD
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bug-reports" class="md-nav__link">
    Bug reports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    Contributing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-and-discussions" class="md-nav__link">
    Support and discussions
  </a>
  
    <nav class="md-nav" aria-label="Support and discussions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forum" class="md-nav__link">
    Forum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mailing-lists" class="md-nav__link">
    Mailing-lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#irc" class="md-nav__link">
    IRC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hacking-on-lxd" class="md-nav__link">
    Hacking on LXD
  </a>
  
    <nav class="md-nav" aria-label="Hacking on LXD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directly-using-the-rest-api" class="md-nav__link">
    Directly using the REST API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_2">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="faq/" class="md-nav__link">
        Frequently asked
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_3" type="checkbox" id="__nav_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_3">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="containers/" class="md-nav__link">
        Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="instances/" class="md-nav__link">
        Instances
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="networks/" class="md-nav__link">
        Networks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="network-acls/" class="md-nav__link">
        Network ACLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="network-forwards/" class="md-nav__link">
        Network Forwards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="preseed/" class="md-nav__link">
        Preseed files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="profiles/" class="md-nav__link">
        Profiles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="projects/" class="md-nav__link">
        Projects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="server/" class="md-nav__link">
        Server settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="storage/" class="md-nav__link">
        Storage pools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="virtual-machines/" class="md-nav__link">
        Virtual machines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="metrics/" class="md-nav__link">
        Instance metrics exporter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_4" type="checkbox" id="__nav_1_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_4">
          Images
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Images" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_4">
          <span class="md-nav__icon md-icon"></span>
          Images
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="architectures/" class="md-nav__link">
        Architectures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="cloud-init/" class="md-nav__link">
        Cloud-init
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="image-handling/" class="md-nav__link">
        Handling
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_5" type="checkbox" id="__nav_1_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_5">
          Operation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_5">
          <span class="md-nav__icon md-icon"></span>
          Operation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="backup/" class="md-nav__link">
        Backups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="clustering/" class="md-nav__link">
        Clustering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="production-setup/" class="md-nav__link">
        Production setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="remotes/" class="md-nav__link">
        Remotes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_6" type="checkbox" id="__nav_1_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_6">
          REST API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="REST API" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_6">
          <span class="md-nav__icon md-icon"></span>
          REST API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="rest-api/" class="md-nav__link">
        Main API documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api-extensions/" class="md-nav__link">
        Main API extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dev-lxd/" class="md-nav__link">
        Instance API documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="events/" class="md-nav__link">
        Events API documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_7" type="checkbox" id="__nav_1_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_7">
          Internals & debugging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Internals & debugging" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_7">
          <span class="md-nav__icon md-icon"></span>
          Internals & debugging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="container-environment/" class="md-nav__link">
        Container environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="migration/" class="md-nav__link">
        Instance migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="daemon-behavior/" class="md-nav__link">
        Daemon behavior
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="database/" class="md-nav__link">
        Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="environment/" class="md-nav__link">
        Environment variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="syscall-interception/" class="md-nav__link">
        System call interception
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="userns-idmap/" class="md-nav__link">
        User namespace setup
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_8" type="checkbox" id="__nav_1_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1_8">
          External resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="External resources" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_8">
          <span class="md-nav__icon md-icon"></span>
          External resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/lxc/lxd" class="md-nav__link">
        Project repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://images.linuxcontainers.org" class="md-nav__link">
        Image server
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tab test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tab test" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tab test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="test/" class="md-nav__link">
        Testing stuff
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#status" class="md-nav__link">
    Status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-lxd-from-packages" class="md-nav__link">
    Installing LXD from packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-lxd-from-source" class="md-nav__link">
    Installing LXD from source
  </a>
  
    <nav class="md-nav" aria-label="Installing LXD from source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-source-building-the-latest-version" class="md-nav__link">
    From Source: Building the latest version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source-building-a-release" class="md-nav__link">
    From Source: Building a Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-build" class="md-nav__link">
    Starting the Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#from-source-installing" class="md-nav__link">
    From Source: Installing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-setup" class="md-nav__link">
    Machine Setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" class="md-nav__link">
    Security
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-lxd" class="md-nav__link">
    Getting started with LXD
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bug-reports" class="md-nav__link">
    Bug reports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing" class="md-nav__link">
    Contributing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-and-discussions" class="md-nav__link">
    Support and discussions
  </a>
  
    <nav class="md-nav" aria-label="Support and discussions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#forum" class="md-nav__link">
    Forum
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mailing-lists" class="md-nav__link">
    Mailing-lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#irc" class="md-nav__link">
    IRC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hacking-on-lxd" class="md-nav__link">
    Hacking on LXD
  </a>
  
    <nav class="md-nav" aria-label="Hacking on LXD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#directly-using-the-rest-api" class="md-nav__link">
    Directly using the REST API
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/lxc/lxd/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <p><a href="https://linuxcontainers.org/lxd"><img alt="LXD" src="https://linuxcontainers.org/static/img/containers.png" /></a></p>
<h1 id="lxd">LXD<a class="headerlink" href="#lxd" title="Permanent link">&para;</a></h1>
<p>LXD is a next generation system container and virtual machine manager.<br />
It offers a unified user experience around full Linux systems running inside containers or virtual machines.</p>
<p>It's image based with pre-made images available for a <a href="https://images.linuxcontainers.org">wide number of Linux distributions</a><br />
and is built around a very powerful, yet pretty simple, REST API.</p>
<p>To get a better idea of what LXD is and what it does, you can <a href="https://linuxcontainers.org/lxd/try-it/">try it online</a>!<br />
Then if you want to run it locally, take a look at our <a href="https://linuxcontainers.org/lxd/getting-started-cli/">getting started guide</a>.</p>
<p>Release announcements can be found here: <a href="https://linuxcontainers.org/lxd/news/">https://linuxcontainers.org/lxd/news/</a><br />
And the release tarballs here: <a href="https://linuxcontainers.org/lxd/downloads/">https://linuxcontainers.org/lxd/downloads/</a>
The documentation is here: <a href="https://linuxcontainers.org/lxd/docs/master/">https://linuxcontainers.org/lxd/docs/master/</a></p>
<h2 id="status">Status<a class="headerlink" href="#status" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Service</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>CI (client)</td>
<td>GitHub</td>
<td><a href="https://github.com/lxc/lxd/actions"><img alt="Build Status" src="https://github.com/lxc/lxd/workflows/Client%20build%20and%20unit%20tests/badge.svg" /></a></td>
</tr>
<tr>
<td>CI (server)</td>
<td>Jenkins</td>
<td><a href="https://jenkins.linuxcontainers.org/job/lxd-github-commit/"><img alt="Build Status" src="https://jenkins.linuxcontainers.org/job/lxd-github-commit/badge/icon" /></a></td>
</tr>
<tr>
<td>Go documentation</td>
<td>Godoc</td>
<td><a href="https://godoc.org/github.com/lxc/lxd/client"><img alt="GoDoc" src="https://godoc.org/github.com/lxc/lxd/client?status.svg" /></a></td>
</tr>
<tr>
<td>Static analysis</td>
<td>GoReport</td>
<td><a href="https://goreportcard.com/report/github.com/lxc/lxd"><img alt="Go Report Card" src="https://goreportcard.com/badge/github.com/lxc/lxd" /></a></td>
</tr>
<tr>
<td>Translations</td>
<td>Weblate</td>
<td><a href="https://hosted.weblate.org/projects/linux-containers/lxd/"><img alt="Translation status" src="https://hosted.weblate.org/widgets/linux-containers/-/svg-badge.svg" /></a></td>
</tr>
<tr>
<td>Project status</td>
<td>CII Best Practices</td>
<td><a href="https://bestpractices.coreinfrastructure.org/projects/1086"><img alt="CII Best Practices" src="https://bestpractices.coreinfrastructure.org/projects/1086/badge" /></a></td>
</tr>
</tbody>
</table>
<h2 id="installing-lxd-from-packages">Installing LXD from packages<a class="headerlink" href="#installing-lxd-from-packages" title="Permanent link">&para;</a></h2>
<p>The LXD daemon only works on Linux but the client tool (<code>lxc</code>) is available on most platforms.</p>
<table>
<thead>
<tr>
<th>OS</th>
<th>Format</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux</td>
<td><a href="https://snapcraft.io/lxd">Snap</a></td>
<td>snap install lxd</td>
</tr>
<tr>
<td>Windows</td>
<td><a href="https://chocolatey.org/packages/lxc">Chocolatey</a></td>
<td>choco install lxc</td>
</tr>
<tr>
<td>MacOS</td>
<td><a href="https://formulae.brew.sh/formula/lxc">Homebrew</a></td>
<td>brew install lxc</td>
</tr>
</tbody>
</table>
<p>More instructions on installing LXD for a wide variety of Linux distributions and operating systems <a href="https://linuxcontainers.org/lxd/getting-started-cli/">can be found on our website</a>.</p>
<h2 id="installing-lxd-from-source">Installing LXD from source<a class="headerlink" href="#installing-lxd-from-source" title="Permanent link">&para;</a></h2>
<p>We recommend having the latest versions of liblxc (&gt;= 3.0.0 required)
available for LXD development. Additionally, LXD requires Golang 1.13 or
later to work. On ubuntu, you can get those with:</p>
<div class="highlight"><pre><span></span><code>sudo apt update
sudo apt install acl attr autoconf dnsmasq-base git golang libacl1-dev libcap-dev liblxc1 liblxc-dev libsqlite3-dev libtool libudev-dev liblz4-dev libuv1-dev make pkg-config rsync squashfs-tools tar tcl xz-utils ebtables
</code></pre></div>
<p>Note that when building LXC yourself, ensure to build it with the appropriate
security related libraries installed which our testsuite tests. Again, on
ubuntu, you can get those with:</p>
<div class="highlight"><pre><span></span><code>sudo apt install libapparmor-dev libseccomp-dev libcap-dev
</code></pre></div>
<p>There are a few storage backends for LXD besides the default "directory" backend.
Installing these tools adds a bit to initramfs and may slow down your
host boot, but are needed if you'd like to use a particular backend:</p>
<div class="highlight"><pre><span></span><code>sudo apt install lvm2 thin-provisioning-tools
sudo apt install btrfs-progs
</code></pre></div>
<p>To run the testsuite, you'll also need:</p>
<div class="highlight"><pre><span></span><code>sudo apt install curl gettext jq sqlite3 uuid-runtime socat
</code></pre></div>
<h3 id="from-source-building-the-latest-version">From Source: Building the latest version<a class="headerlink" href="#from-source-building-the-latest-version" title="Permanent link">&para;</a></h3>
<p>These instructions for building from source are suitable for individual developers who want to build the latest version
of LXD, or build a specific release of LXD which may not be offered by their Linux distribution. Source builds for
integration into Linux distributions are not covered here and may be covered in detail in a separate document in the
future.</p>
<div class="highlight"><pre><span></span><code>git clone https://github.com/lxc/lxd
<span class="nb">cd</span> lxd
</code></pre></div>
<p>This will download the current development tree of LXD and place you in the source tree.
Then proceed to the instructions below to actually build and install LXD.</p>
<h3 id="from-source-building-a-release">From Source: Building a Release<a class="headerlink" href="#from-source-building-a-release" title="Permanent link">&para;</a></h3>
<p>The LXD release tarballs bundle a complete dependency tree as well as a
local copy of libraft and libdqlite for LXD's database setup.</p>
<div class="highlight"><pre><span></span><code>tar zxvf lxd-4.18.tar.gz
<span class="nb">cd</span> lxd-4.18
</code></pre></div>
<p>This will unpack the release tarball and place you inside of the source tree.
Then proceed to the instructions below to actually build and install LXD.</p>
<h3 id="starting-the-build">Starting the Build<a class="headerlink" href="#starting-the-build" title="Permanent link">&para;</a></h3>
<p>The actual building is done by two separate invocations of the Makefile: <code>make deps</code> -- which builds libraries required 
by LXD -- and <code>make</code>, which builds LXD itself. At the end of <code>make deps</code>, a message will be displayed which will specify environment variables that should be set prior to invoking <code>make</code>. As new versions of LXD are released, these environment
variable settings may change, so be sure to use the ones displayed at the end of the <code>make deps</code> process, as the ones
below (shown for example purposes) may not exactly match what your version of LXD requires:</p>
<p>We recommend having at least 2GB of RAM to allow the build to complete.</p>
<div class="highlight"><pre><span></span><code>make deps
<span class="c1"># Follow the instructions from `make deps` to export the required environment variables.</span>
<span class="c1"># For example:</span>
<span class="c1">#  export CGO_CFLAGS=&quot;${CGO_CFLAGS} -I$(go env GOPATH)/deps/dqlite/include/ -I$(go env GOPATH)/deps/raft/include/&quot;</span>
<span class="c1">#  export CGO_LDFLAGS=&quot;${CGO_LDFLAGS} -L$(go env GOPATH)/deps/dqlite/.libs/ -L$(go env GOPATH)/deps/raft/.libs/&quot;</span>
<span class="c1">#  export LD_LIBRARY_PATH=&quot;$(go env GOPATH)/deps/dqlite/.libs/:$(go env GOPATH)/deps/raft/.libs/:${LD_LIBRARY_PATH}&quot;</span>
<span class="c1">#  export CGO_LDFLAGS_ALLOW=&quot;(-Wl,-wrap,pthread_create)|(-Wl,-z,now)&quot;</span>
make
</code></pre></div>
<h3 id="from-source-installing">From Source: Installing<a class="headerlink" href="#from-source-installing" title="Permanent link">&para;</a></h3>
<p>Once the build completes, you simply keep the source tree, add the directory referenced by <code>$(go env GOPATH)/bin</code> to
your shell path, and set the <code>LD_LIBRARY_PATH</code> variable printed by <code>make deps</code> to your environment. This might look
something like this for a <code>~/.bashrc</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">:</span><span class="k">$(</span>go env GOPATH<span class="k">)</span><span class="s2">/bin&quot;</span>
<span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>go env GOPATH<span class="k">)</span><span class="s2">/deps/dqlite/.libs/:</span><span class="k">$(</span>go env GOPATH<span class="k">)</span><span class="s2">/deps/raft/.libs/:</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<p>Now, the <code>lxd</code> and <code>lxc</code> binaries will be available to you and can be used to set up LXD. The binaries will automatically find and use the dependencies built in <code>$(go env GOPATH)/deps</code> thanks to the <code>LD_LIBRARY_PATH</code> environment variable.</p>
<h3 id="machine-setup">Machine Setup<a class="headerlink" href="#machine-setup" title="Permanent link">&para;</a></h3>
<p>You'll need sub{u,g}ids for root, so that LXD can create the unprivileged containers:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span> <span class="s2">&quot;root:1000000:65536&quot;</span> <span class="p">|</span> sudo tee -a /etc/subuid /etc/subgid
</code></pre></div>
<p>Now you can run the daemon (the <code>--group sudo</code> bit allows everyone in the <code>sudo</code>
group to talk to LXD; you can create your own group if you want):</p>
<div class="highlight"><pre><span></span><code>sudo -E <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span> <span class="k">$(</span>go env GOPATH<span class="k">)</span>/bin/lxd --group sudo
</code></pre></div>
<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h2>
<p>LXD, similar to other container and VM managers provides a UNIX socket for local communication.</p>
<p><strong>WARNING</strong>: Anyone with access to that socket can fully control LXD, which includes
the ability to attach host devices and filesystems, this should
therefore only be given to users who would be trusted with root access
to the host.</p>
<p>When listening on the network, the same API is available on a TLS socket
(HTTPS), specific access on the remote API can be restricted through
Canonical RBAC.</p>
<p>More details are <a href="security/">available here</a>.</p>
<h2 id="getting-started-with-lxd">Getting started with LXD<a class="headerlink" href="#getting-started-with-lxd" title="Permanent link">&para;</a></h2>
<p>Now that you have LXD running on your system you can read the <a href="https://linuxcontainers.org/lxd/getting-started-cli/">getting started guide</a> or go through more examples and configurations in <a href="https://linuxcontainers.org/lxd/docs/master/">our documentation</a>.</p>
<h2 id="bug-reports">Bug reports<a class="headerlink" href="#bug-reports" title="Permanent link">&para;</a></h2>
<p>Bug reports and Feature requests can be filed at: <a href="https://github.com/lxc/lxd/issues/new">https://github.com/lxc/lxd/issues/new</a></p>
<h2 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">&para;</a></h2>
<p>Fixes and new features are greatly appreciated but please read our <a href="contributing/">contributing guidelines</a> first.</p>
<h2 id="support-and-discussions">Support and discussions<a class="headerlink" href="#support-and-discussions" title="Permanent link">&para;</a></h2>
<h3 id="forum">Forum<a class="headerlink" href="#forum" title="Permanent link">&para;</a></h3>
<p>A discussion forum is available at: <a href="https://discuss.linuxcontainers.org">https://discuss.linuxcontainers.org</a></p>
<h3 id="mailing-lists">Mailing-lists<a class="headerlink" href="#mailing-lists" title="Permanent link">&para;</a></h3>
<p>We use the LXC mailing-lists for developer and user discussions, you can
find and subscribe to those at: <a href="https://lists.linuxcontainers.org">https://lists.linuxcontainers.org</a></p>
<h3 id="irc">IRC<a class="headerlink" href="#irc" title="Permanent link">&para;</a></h3>
<p>If you prefer live discussions, you can find us in <a href="https://kiwiirc.com/client/irc.libera.chat/#lxc">#lxc</a> on irc.libera.chat.</p>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<h4 id="how-to-enable-lxd-server-for-remote-access">How to enable LXD server for remote access?<a class="headerlink" href="#how-to-enable-lxd-server-for-remote-access" title="Permanent link">&para;</a></h4>
<p>By default LXD server is not accessible from the networks as it only listens
on a local unix socket. You can make LXD available from the network by specifying
additional addresses to listen to. This is done with the <code>core.https_address</code>
config variable.</p>
<p>To see the current server configuration, run:</p>
<div class="highlight"><pre><span></span><code>lxc config show
</code></pre></div>
<p>To set the address to listen to, find out what addresses are available and use
the <code>config set</code> command on the server:</p>
<div class="highlight"><pre><span></span><code>ip addr
lxc config <span class="nb">set</span> core.https_address <span class="m">192</span>.168.1.15
</code></pre></div>
<h4 id="when-i-do-a-lxc-remote-add-over-https-it-asks-for-a-password">When I do a <code>lxc remote add</code> over https, it asks for a password?<a class="headerlink" href="#when-i-do-a-lxc-remote-add-over-https-it-asks-for-a-password" title="Permanent link">&para;</a></h4>
<p>By default, LXD has no password for security reasons, so you can't do a remote
add this way. In order to set a password, do:</p>
<div class="highlight"><pre><span></span><code>lxc config <span class="nb">set</span> core.trust_password SECRET
</code></pre></div>
<p>on the host LXD is running on. This will set the remote password that you can
then use to do <code>lxc remote add</code>.</p>
<p>You can also access the server without setting a password by copying the client
certificate from <code>.config/lxc/client.crt</code> to the server and adding it with:</p>
<div class="highlight"><pre><span></span><code>lxc config trust add client.crt
</code></pre></div>
<h4 id="how-do-i-configure-lxd-storage">How do I configure LXD storage?<a class="headerlink" href="#how-do-i-configure-lxd-storage" title="Permanent link">&para;</a></h4>
<p>LXD supports btrfs, ceph, directory, lvm and zfs based storage.</p>
<p>First make sure you have the relevant tools for your filesystem of
choice installed on the machine (btrfs-progs, lvm2 or zfsutils-linux).</p>
<p>By default, LXD comes with no configured network or storage.
You can get a basic configuration done with:</p>
<div class="highlight"><pre><span></span><code>    lxd init
</code></pre></div>
<p><code>lxd init</code> supports both directory based storage and ZFS.
If you want something else, you'll need to use the <code>lxc storage</code> command:</p>
<div class="highlight"><pre><span></span><code>lxc storage create default BACKEND <span class="o">[</span>OPTIONS...<span class="o">]</span>
lxc profile device add default root disk <span class="nv">path</span><span class="o">=</span>/ <span class="nv">pool</span><span class="o">=</span>default
</code></pre></div>
<p>BACKEND is one of <code>btrfs</code>, <code>ceph</code>, <code>dir</code>, <code>lvm</code> or <code>zfs</code>.</p>
<p>Unless specified otherwise, LXD will setup loop based storage with a sane default size.</p>
<p>For production environments, you should be using block backed storage
instead both for performance and reliability reasons.</p>
<h4 id="how-can-i-live-migrate-a-container-using-lxd">How can I live migrate a container using LXD?<a class="headerlink" href="#how-can-i-live-migrate-a-container-using-lxd" title="Permanent link">&para;</a></h4>
<p>Live migration requires a tool installed on both hosts called
<a href="https://criu.org">CRIU</a>, which is available in Ubuntu via:</p>
<div class="highlight"><pre><span></span><code>sudo apt install criu
</code></pre></div>
<p>Then, launch your container with the following,</p>
<div class="highlight"><pre><span></span><code>lxc launch ubuntu SOME-NAME
sleep 5s <span class="c1"># let the container get to an interesting state</span>
lxc move host1:SOME-NAME host2:SOME-NAME
</code></pre></div>
<p>And with luck you'll have migrated the container :). Migration is still in
experimental stages and may not work for all workloads. Please report bugs on
lxc-devel, and we can escalate to CRIU lists as necessary.</p>
<h4 id="can-i-bind-mount-my-home-directory-in-a-container">Can I bind mount my home directory in a container?<a class="headerlink" href="#can-i-bind-mount-my-home-directory-in-a-container" title="Permanent link">&para;</a></h4>
<p>Yes. This can be done using a disk device:</p>
<div class="highlight"><pre><span></span><code>lxc config device add container-name home disk <span class="nv">source</span><span class="o">=</span>/home/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span> <span class="nv">path</span><span class="o">=</span>/home/ubuntu
</code></pre></div>
<p>For unprivileged containers, you will also need one of:</p>
<ul>
<li>Pass <code>shift=true</code> to the <code>lxc config device add</code> call. This depends on <code>shiftfs</code> being supported (see <code>lxc info</code>)</li>
<li>raw.idmap entry (see <a href="userns-idmap/">Idmaps for user namespace</a>)</li>
<li>Recursive POSIX ACLs placed on your home directory</li>
</ul>
<p>Either of those can be used to allow the user in the container to have working read/write permissions.
When not setting one of those, everything will show up as the overflow uid/gid (65536:65536)
and access to anything that's not world readable will fail.</p>
<p>Privileged containers do not have this issue as all uid/gid inthe container are the same outside.
But that's also the cause of most of the security issues with such privileged containers.</p>
<h4 id="how-can-i-run-docker-inside-a-lxd-container">How can I run docker inside a LXD container?<a class="headerlink" href="#how-can-i-run-docker-inside-a-lxd-container" title="Permanent link">&para;</a></h4>
<p>In order to run Docker inside a LXD container the <code>security.nesting</code> property of the container should be set to <code>true</code>. </p>
<div class="highlight"><pre><span></span><code>lxc config <span class="nb">set</span> &lt;container&gt; security.nesting <span class="nb">true</span>
</code></pre></div>
<p>Note that LXD containers cannot load kernel modules, so depending on your
Docker configuration you may need to have the needed extra kernel modules
loaded by the host.</p>
<p>You can do so by setting a comma separate list of kernel modules that your container needs with:</p>
<div class="highlight"><pre><span></span><code>lxc config <span class="nb">set</span> &lt;container&gt; linux.kernel_modules &lt;modules&gt;
</code></pre></div>
<p>We have also received some reports that creating a <code>/.dockerenv</code> file in your
container can help Docker ignore some errors it's getting due to running in a
nested environment.</p>
<h2 id="hacking-on-lxd">Hacking on LXD<a class="headerlink" href="#hacking-on-lxd" title="Permanent link">&para;</a></h2>
<h3 id="directly-using-the-rest-api">Directly using the REST API<a class="headerlink" href="#directly-using-the-rest-api" title="Permanent link">&para;</a></h3>
<p>The LXD REST API can be used locally via unauthenticated Unix socket or remotely via SSL encapsulated TCP.</p>
<h4 id="via-unix-socket">Via Unix socket<a class="headerlink" href="#via-unix-socket" title="Permanent link">&para;</a></h4>
<p><div class="highlight"><pre><span></span><code>curl --unix-socket /var/lib/lxd/unix.socket <span class="se">\</span>
    -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -X POST <span class="se">\</span>
    -d @hello-ubuntu.json <span class="se">\</span>
    lxd/1.0/containers
</code></pre></div>
or for snap users:</p>
<div class="highlight"><pre><span></span><code>curl --unix-socket /var/snap/lxd/common/lxd/unix.socket <span class="se">\</span>
    -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -X POST <span class="se">\</span>
    -d @hello-ubuntu.json <span class="se">\</span>
    lxd/1.0/containers
</code></pre></div>
<h4 id="via-tcp">Via TCP<a class="headerlink" href="#via-tcp" title="Permanent link">&para;</a></h4>
<p>TCP requires some additional configuration and is not enabled by default.</p>
<div class="highlight"><pre><span></span><code>lxc config <span class="nb">set</span> core.https_address <span class="s2">&quot;[::]:8443&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>curl -k -L <span class="se">\</span>
    --cert ~/.config/lxc/client.crt <span class="se">\</span>
    --key ~/.config/lxc/client.key <span class="se">\</span>
    -H <span class="s2">&quot;Content-Type: application/json&quot;</span> <span class="se">\</span>
    -X POST <span class="se">\</span>
    -d @hello-ubuntu.json <span class="se">\</span>
    <span class="s2">&quot;https://127.0.0.1:8443/1.0/containers&quot;</span>
</code></pre></div>
<h4 id="json-payload">JSON payload<a class="headerlink" href="#json-payload" title="Permanent link">&para;</a></h4>
<p>The <code>hello-ubuntu.json</code> file referenced above could contain something like:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;some-ubuntu&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ephemeral&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;limits.cpu&quot;</span><span class="p">:</span><span class="s2">&quot;2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;image&quot;</span><span class="p">,</span>
        <span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;pull&quot;</span><span class="p">,</span>
        <span class="nt">&quot;protocol&quot;</span><span class="p">:</span><span class="s2">&quot;simplestreams&quot;</span><span class="p">,</span>
        <span class="nt">&quot;server&quot;</span><span class="p">:</span><span class="s2">&quot;https://cloud-images.ubuntu.com/releases&quot;</span><span class="p">,</span>
        <span class="nt">&quot;alias&quot;</span><span class="p">:</span><span class="s2">&quot;18.04&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="requirements/" class="md-footer__link md-footer__link--next" aria-label="Next: Requirements" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Requirements
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.top", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>